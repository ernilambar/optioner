(()=>{"use strict";class e{constructor(){this.initHeading(),this.initColor(),this.initMedia();!0===document.querySelector(".wrap-content").classList.contains("tab-enabled")&&this.initTab()}initHeading(){[...document.getElementsByClassName("form-field-heading")].forEach((e=>{const t=e.parentNode.parentNode;t.querySelector("th").style.display="none",t.querySelector("td").setAttribute("colspan",2)}))}initColor(){[...document.getElementsByClassName("optioner-color")].forEach((e=>{jQuery(e).wpColorPicker()}))}initTab(){const e=document.getElementById("optioner-wrapper"),t=document.getElementsByClassName("tab-content"),a=document.querySelectorAll(".nav-tab-wrapper a"),o=[...t],n=[...a];o.forEach((e=>{e.style.display="none"}));let s="";if("undefined"!=typeof localStorage&&(s=localStorage.getItem(OPTIONER_OBJ.storage_key)),null!==s&&document.getElementById(s)){const e=document.getElementById(s);e&&(e.style.display="block")}else t[0].style.display="block";if(null!==s&&document.getElementById(s)){const t=e.querySelector(`.nav-tab-wrapper a[href="#${s}"]`);t&&t.classList.add("nav-tab-active")}else a[0].classList.add("nav-tab-active");n.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),n.forEach((e=>{e.classList.remove("nav-tab-active")})),e.classList.add("nav-tab-active");const a=e.getAttribute("href");"undefined"!=typeof localStorage&&localStorage.setItem(OPTIONER_OBJ.storage_key,a.replace("#","")),o.forEach((e=>{e.style.display="none"})),document.getElementById(a.replace("#","")).style.display="block"}))}))}initMedia(){let e="";[...document.getElementsByClassName("select-img")].forEach((t=>{const a=t.dataset.uploader_title,o=t.dataset.uploader_button_text;t.addEventListener("click",(n=>{if(n.preventDefault(),e)return void e.open();const s=wp.media.controller.Library.extend({defaults:_.defaults({id:"optioner-custom-insert-image",title:a,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:!1,library:wp.media.query({type:"image"})},wp.media.controller.Library.prototype.defaults)});e=wp.media.frames.optionerCustomFileFrame=wp.media({button:{text:o},state:"optioner-custom-insert-image",states:[new s],multiple:!1}),e.on("select",(()=>{const a=e.state("optioner-custom-insert-image").get("selection").first().toJSON().url;t.parentNode.querySelector(".img").value=a,t.parentNode.querySelector(".image-preview-wrap").innerHTML=`<img src="${a}" alt="" />`;const o=t.parentNode.querySelector(".js-remove-image");o.classList.remove("hide"),o.classList.add("show")})),e.open()}))}));[...document.getElementsByClassName("js-remove-image")].forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.parentNode.querySelector(".img").value="",e.parentNode.querySelector(".image-preview-wrap").innerHTML="",e.classList.remove("show"),e.classList.add("hide")}))}))}}document.addEventListener("DOMContentLoaded",(function(){new e}))})();